<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <meta name="description" content="Nighttrader: Over the counter (OTC) trading chat and future DEX/ MSEX - Decentralized/ Multisignature Exchange. State of the art, highly secured, trustless and peer to peer.">
    <meta name="author" content="AlecFrazerMatthewHahn">

    <script src="https://bitcoin42.com.mx/support/js/min/jquery.min.js"></script>
    <script id="sbinit" src="https://bitcoin42.com.mx/support/js/init.js"></script>

    <title>Nighttrader - Over the counter (OTC) trading calculator</title>
    <!-- Favicon icon -->
    <link rel="icon" type="image/png" sizes="16x16" href="./images/favicon.png">
    <link rel="stylesheet" href="./vendor/nice-select/css/nice-select.css">
    <link rel="stylesheet" href="./vendor/owl-carousel/css/owl.theme.default.css">
    <link rel="stylesheet" href="./vendor/owl-carousel/css/owl.carousel.min.css">
    <!-- Custom Stylesheet -->
    <link rel="stylesheet" href="./css/style.css">
</head>

<body>

    <div id="preloader">
        <div class="sk-three-bounce">
            <div class="sk-child sk-bounce1"></div>
            <div class="sk-child sk-bounce2"></div>
            <div class="sk-child sk-bounce3"></div>
        </div>
    </div>

    <div id="main-wrapper">

        <div class="header">
            <div class="container">
                <div class="row">
                    <div class="col-xl-12">
                        <div class="navigation">
                            <nav class="navbar navbar-expand-lg navbar-light bg-light">
                                <a class="navbar-brand" href="index.html"><img src="./images/logo.png" alt=""></a>
                                <button class="navbar-toggler" type="button" data-toggle="collapse"
                                    data-target="#navbarNavDropdown" aria-controls="navbarNavDropdown"
                                    aria-expanded="false" aria-label="Toggle navigation">
                                    <span class="navbar-toggler-icon"></span>
                                </button>
                                <div class="collapse navbar-collapse" id="navbarNavDropdown">
                                    <ul class="navbar-nav">
                                                                                
                                        <li class="nav-item">
                                            <a class="nav-link" href="#" data-scroll-nav="1">SELL</a>
                                        </li>
                                        <li class="nav-item">
                                            <a href="index-2.html">BUY</a>
                                        </li>
                                        <li class="nav-item">
                                            <a href="instructions.html">Instructions</a>
                                        </li>
                                        <li class="nav-item">
                                            <a class="nav-link" href="#" data-scroll-nav="3">Contact</a>
                                        </li>


                                    </ul>
                                </div>
                            </nav>
                        </div>
                    </div>
                </div>
            </div>
        </div>





        <div class="portfolio section-padding" data-scroll-index="1">
            <div class="container">
                <div class="row py-lg-5 justify-content-center">
                    <div class="col-xl-7">
                        <div class="section-title text-center">
                            <h2>OTC Calculator - Customer selling Coin:</h2>   

                            </div>
Step 1:
<tr>
    <br>Casa de cambio Email Login:<br>
    <td colspan="2"><input class="textBox" id="emailcasa" type="text" maxlength="50" style="width: 300px;" required/></td>
    </tr>
    <br><br>Step 2:
    <tr>
        <br>Dollar to peso exchange rate (buying dollars):
        <td colspan="2"><input class="textBox" id="exchangerate" type="text" maxlength="50"    required/></td>
    </tr>
    <br><br>Step 3:<br>
                            <select id="coin">
                                <option>Sell Bitcoin</option>
                                <option>Sell Ethereum</option>
                                </select>
                                <br><br>
                                <div id="selldiv"></div>
                                <div id="sellQR"></div>
                                <div id="timerdiv"></div>
                                <tr>
                                    <td colspan="2"><input class="textBox" id="sellamount" type="text" maxlength="30"    required/></td>
                                </tr>
                                <select id="conversion">
                                <option>USD</option>
                                <option>Pesos</option>
                                <option>Coins</option>
                                </select>
                                <input type="button" value="Sell $" onclick="calculatePrice()">
                                <input type="button" value="Clear" onclick="clearit()">


                                <br><br><br>
                                Step 4:

                                <tr>
                                    <br>Email Receipt (optional):<br>
                                    <td colspan="2"><input class="textBox" id="emailreceipt" type="text" maxlength="50"    required/></td>
                                </tr>

                                <br><br>
                                Step 5:<br>
                                <input type="button" value="Send email to confirm order!" onclick="email()">

                                </body>
                                <div id="hiddendiv">
                                    <tr>
                                        <br>Custom bid price(to confirm calculation):<br>
                                        <td colspan="2"><input class="textBox" id="custombid" type="text" maxlength="50"    required/></td>
                                    </tr>
                                </div>
                                <script>
                                    function hide (elements) {
                                        document.getElementById('custombid').value="";
                                        elements = elements.length ? elements : [elements];
                                        for (var index = 0; index < elements.length; index++) {
                                            elements[index].style.display = 'none';
                                        }
                                    }
                                    function show (elements, specifiedDisplay) {
                                        elements = elements.length ? elements : [elements];
                                        for (var index = 0; index < elements.length; index++) {
                                            elements[index].style.display = specifiedDisplay || 'block';
                                        }
                                    }
                                    hide(document.getElementById('hiddendiv'));
                                </script>
                                <div id="notificationdiv"></div>
                                <script src="./rates.js"></script>
                                <script src="./users.js"></script>
                                <script src="./web3.min.js"></script>
                                <script>
                                    web3 = new Web3("https://cloudflare-eth.com");
                                    var quoted = 0;
                                    var globcontent = "";
                                    function calculatePrice(){
                                        console.log(web3.utils.sha3(document.getElementById('emailcasa').value.toLowerCase()));
                                        if(web3.utils.sha3(document.getElementById('emailcasa').value.toLowerCase()) in registeredemails) {            
                                        } else {
                                            document.getElementById('notificationdiv').innerHTML="Not a registered cashier, please check email address";
                                            return;
                                        }
                                        amount=document.getElementById('sellamount').value;
                                        if (amount == "show") {
                                            show(document.getElementById('hiddendiv'));
                                            return;
                                        }        
                                        var coin = document.getElementById("coin");
                                        var coin1 = "";
                                        var coin2 = "";
                                        if (coin.value == "Sell Bitcoin") {
                                            coin = "BTC";
                                            coin1 = "bitcoin";
                                            coin2 = "Bitcoin";
                                            address = "1DRv5FouLzQvgPDhgi3g9jyZEqT2vVzkxq";
                                        }
                                        if (coin.value == "Sell Ethereum") {
                                            coin = "ETH";
                                            coin1 = "ethereum";
                                            coin2 = "Ethereum";
                                            address = "0xbB56fD1575C275e1dC94E576A7d18347367a8d36";
                                        }
                                        var burl = "https://api.binance.com";
                                        var query = '/api/v1/ticker/24hr';
                                        query += '?symbol='+coin+'DAI';
                                        var url = burl + query;
                                        var ourRequest = new XMLHttpRequest();
                                        ourRequest.open('GET',url,true);
                                        ourRequest.onload = function(){
                                            binancedata = JSON.parse(ourRequest.responseText);
                                            binancedata = binancedata.bidPrice;
                                            customrate = document.getElementById('custombid').value;
                                            if (customrate != "") {
                                                binancedata = customrate;
                                            }
                                            var conversion = document.getElementById("conversion").value;
                                            if (conversion ==  "Pesos") {
                                                rate=document.getElementById('exchangerate').value;
                                                amount=parseFloat(parseFloat(amount)/parseFloat(rate)).toFixed(0);
                                            }
                                            if (conversion == "Coins") {
                                                btctotal=amount;
                                                amount=parseFloat(parseFloat(binancedata)*parseFloat(amount)).toFixed(0);                
                                            } else {
                                                btctotal = parseFloat(parseFloat(amount) / parseFloat(binancedata)).toFixed(8);
                                            }
                                            amount=parseFloat(amount);
                                            if (coin == "BTC") {
                                                if (amount < parseFloat(rates.minBTCsell)) {
                                                    clearfields();
                                                    document.getElementById('notificationdiv').innerHTML="Amount under minimum: " + rates.minBTCsell;
                                                    return;
                                                }
                                            }
                                            if (coin == "ETH") {
                                                if (amount < parseFloat(rates.minERCsell)) {
                                                    clearfields();
                                                    document.getElementById('notificationdiv').innerHTML="Amount under minimum: " + rates.minERCsell;
                                                    return;
                                                }
                                            }
                                            document.getElementById('notificationdiv').innerHTML="";
                                            var totalcom = 10;
                                            var comcasa = 3;
                                            var comnt = 7;
                                            for(var i = 0, size = rates.rates.length; i < size ; i++) {
                                                if (amount > parseFloat(rates.rates[i][0])) {
                                                    totalcom = rates.rates[i][1] + rates.rates[i][2];
                                                    comcasa = rates.rates[i][1];
                                                    comnt = rates.rates[i][2];
                                                }
                                            }
                                            //https://api.binance.com/sapi/v1/capital/deposit/address
                                            commission = parseFloat((parseFloat(amount)*parseFloat(totalcom))/parseFloat(100)).toFixed(0);            
                                            commissionCasa = parseFloat((parseFloat(amount)*parseFloat(comcasa))/parseFloat(100)).toFixed(0);
                                            commissionNT = parseFloat(parseFloat(commission)-parseFloat(commissionCasa)).toFixed(0);
                                            payout = parseFloat(parseFloat(amount) - parseFloat(commission)).toFixed(0);
                                            mycontent="";
                                            document.getElementById('selldiv').innerHTML = "";
                                            mycontent += "<br>";
                                            mycontent += "Customer needs to send:"+coin+" " + btctotal.toString();
                                            mycontent += "<br>Commission in dollars: " + commission + "   (Casa:" + commissionCasa + ")(NT/fees:" + commissionNT + ")";
                                            mycontent += "<br>Customer payout in dollars: " + payout;
                                            document.getElementById('selldiv').innerHTML = mycontent;
                                            document.getElementById("sellQR").innerHTML = "";        
                                            var elem = document.createElement("img");
                                            elem.setAttribute("src", "https://chart.googleapis.com/chart?chs=250x250&chld=L|2&cht=qr&chl="+coin1+":"+address+"?amount="+btctotal);
                                            elem.setAttribute("height", "250");
                                            elem.setAttribute("width", "250");
                                            document.getElementById("sellQR").appendChild(elem);
                                            document.getElementById('sellQR').innerHTML += "<br>"+coin2+" deposit address: " + address + "<br>";            
                                            mycontent=mycontent.replace(/<br>/g,"%0A");
                                            mycontent+="%0A"+coin2+" deposit address(client sent here): " + address;
                                            mycontent+="%0ABinance/exchange "+coin2+" bid price: " + binancedata;
                                            mycontent+="%0A%0A"+"Cashier's contract address: " + registeredemails[web3.utils.sha3(document.getElementById('emailcasa').value.toLowerCase())];
                                            mycontent+="%0A"+"NT to send " + (parseFloat(payout) + parseFloat(commissionCasa)).toString() + " to cashier contract";
                                            globcontent = mycontent;
                                            quoted = 600;
                                            clearInterval(interval);
                                            interval = setInterval(clearfields, 600000);
                                        }
                                        ourRequest.send();
                                    }
                                    function clearit() {
                                        if (confirm("Are you sure you want to clear everything?")) {
                                          clearfields();
                                        }
                                    }
                                    function clearfields() {
                                        document.getElementById('sellamount').value = "";
                                        document.getElementById('selldiv').innerHTML = "";
                                        document.getElementById("sellQR").innerHTML = "";
                                        document.getElementById('timerdiv').innerHTML = "";
                                        document.getElementById('emailreceipt').value="";
                                        document.getElementById('notificationdiv').innerHTML="";
                                        document.getElementById('custombid').value="";
                                        quoted = 0;
                                        globcontent = "";
                                    }
                                    interval = setInterval(clearfields, 600000);
                                
                                    function quotetime() {
                                        if (quoted != 0) {
                                            quoted -= 1;
                                            document.getElementById('timerdiv').innerHTML = "Seconds until quote expires: " + quoted;
                                        }
                                    }
                                    setInterval(quotetime, 1000);
                                
                                    function email() {
                                        window.location.href = "mailto:afmhahn@gmail.com,"+document.getElementById('emailreceipt').value+"?subject=NightTrader OTC notification&body="+globcontent;
                                        document.getElementById('emailreceipt').value="";
                                    }
                                </script>
                        </div>
                    </div>
                </div>
                    
            </div>
        </div>



        <div class="get-touch section-padding"  data-scroll-index="3">
            <div class="container">
                <div class="row justify-content-center">
                    <div class="col-xl-6">
                        <div class="section-title">
                            <h2>Get in touch. Stay in touch.</h2>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-xl-6 col-lg-6 col-md-6">
                        <div class="get-touch-content">
                            <div class="media">
                                <span><i class="fa fa-support"></i></span>
                                <div class="media-body">
                                    <h4>Chat Support</h4>
                                    <p>Got a problem? Just get in touch. Our support team is almost available on every day
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-xl-6 col-lg-6 col-md-6">
                        <div class="get-touch-content">
                            <div class="media">
                                <span><i class="fa fa-telegram"></i></span>
                                <div class="media-body">
                                    <h4>Nighttrader <a href="https://t.me/nighttrader_org">Telegram Channel</a></h4>
                                    <p>News, updates and community of the future world class cryptocurrency exchange
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-xl-6 col-lg-6 col-md-6">
                        <div class="get-touch-content">
                            <div class="media">
                                <span><i class="fa fa-linkedin"></i></span>
                                <div class="media-body">
                                    <h4>Careers</h4>
                                    <p>Interst in a career; please contact us <a href="https://www.linkedin.com/in/alechahn/">here via LinkedIn</a>
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-xl-6 col-lg-6 col-md-6">
                        <div class="get-touch-content">
                            <div class="media">
                                <span><i class="fa fa-life-ring"></i></span>
                                <div class="media-body">
                                    <h4>Email</h4>
                                    <p>Write to <a href="mailto:alec@bitcoin42.com">alec@bitcoin42.com</a>
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>


        <div class="bottom section-padding">
            <div class="container">
                <div class="row justify-content-center">
                    <div class="col-xl-8">
                        <div class="section-title text-center">
                    
                            <img class="pb-3" src="./images/logo.png" alt="">
                            <p>© Copyright 2014 to 2021 - Nightttrader -  All Rights Reserved <br> <a href="#">NAOME S.A.P.I. de C.V.</a></p>
                                        <a href="https://github.com/NightTrader/"><i class="fa fa-github"></i></a> 
                                        <a href="https://t.me/nighttrader_org"><i class="fa fa-telegram"></i></a>
                              
                        </div>
                    </div>



    <script src="./js/global.js"></script>
    <script src="./vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

    <script src="./vendor/owl-carousel/js/owl.carousel.min.js"></script>
    <script src="./js/plugins/owl-carousel-init.js"></script>

    <script src="./vendor/scrollit/scrollIt.js"></script>
    <script src="./js/plugins/scrollit-init.js"></script>

    <script src="./vendor/apexchart/apexcharts.min.js"></script>
    <script src="./vendor/apexchart/apexchart-init.js"></script>

    <script src="./js/scripts.js"></script>
</body>

</html>
